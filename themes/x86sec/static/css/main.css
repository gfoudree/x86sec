/* ─────────────────────────────────────────
   x86sec theme — "clean terminal" aesthetic
   ───────────────────────────────────────── */

@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap');

/* ── Variables ───────────────────────────── */
:root {
  --bg:        #0d0f14;
  --bg2:       #111520;
  --bg3:       #161b26;
  --border:    #1e2535;
  --border2:   #2a3352;
  --text:      #c9d1e0;
  --text-dim:  #5a6680;
  --text-muted:#3a4460;
  --accent:    #00e5a0;       /* terminal green */
  --accent2:   #b06aff;       /* replaced blue with hacker purple for accent2 */
  --accent3:   #ff4466;       /* alert red       */
  --warn:      #b06aff;       /* hacker purple  */
  --font-mono: 'IBM Plex Mono', 'Courier New', monospace;
  --font-sans: 'IBM Plex Sans', sans-serif;
  --max-w:     1100px;
  --radius:    3px;
}

/* ── Reset ───────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-sans);
  font-size: 17px;
  line-height: 1.75;
  min-height: 100vh;
  /* very subtle scan-line texture */
  background-image:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,.025) 2px,
      rgba(0,0,0,.025) 4px
    );
}

a { color: var(--warn); text-decoration: none; transition: color .15s; }
a:hover { color: var(--accent); }

/* Ensure images are centered on the page in all contexts */
/* Ensure images are centered on the page in most contexts. Use stronger selectors below to
   override floated or framework-specific image classes used by markdown renderers. */
img { max-width: 100%; display: block; margin-left: auto; margin-right: auto; }

/* ── Layout ──────────────────────────────── */
.container {
  max-width: var(--max-w);
  margin: 0 auto;
  padding: 0 1.5rem;
}

/* ── Header ──────────────────────────────── */
header.site-header {
  border-bottom: 1px solid var(--border);
  padding: 1.25rem 0;
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  z-index: 100;
  background: rgba(13,15,20,.92);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

header.site-header .container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}

.site-logo {
  font-family: var(--font-mono);
  font-weight: 600;
  font-size: 1.4rem;
  color: var(--accent);           /* explicit — Safari was missing this */
  letter-spacing: .02em;
  display: -webkit-flex;
  display: flex;
  -webkit-align-items: center;
  align-items: center;
  position: relative;
  text-decoration: none;
  -webkit-animation: logo-breathe 3.5s ease-in-out infinite;
  animation: logo-breathe 3.5s ease-in-out infinite;
  -webkit-transform: translateZ(0); /* force GPU layer — fixes Firefox animation */
  transform: translateZ(0);
  will-change: text-shadow;
}
@-webkit-keyframes logo-breathe {
  0%,100% { text-shadow: 0 0 8px rgba(0,229,160,.2), 0 0 20px rgba(0,229,160,.1); }
  50%      { text-shadow: 0 0 16px rgba(0,229,160,.55), 0 0 40px rgba(0,229,160,.2); }
}
@keyframes logo-breathe {
  0%,100% { text-shadow: 0 0 8px rgba(0,229,160,.2), 0 0 20px rgba(0,229,160,.1); }
  50%      { text-shadow: 0 0 16px rgba(0,229,160,.55), 0 0 40px rgba(0,229,160,.2); }
}
/* glitch chromatic layers */
.site-logo::before,
.site-logo::after {
  content: attr(data-text);
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0; /* explicit fallback — inset not in older Safari */
  display: -webkit-flex;
  display: flex;
  -webkit-align-items: center;
  align-items: center;
  font-family: var(--font-mono);
  font-weight: 600;
  font-size: 1.4rem;
  letter-spacing: .02em;
  opacity: 0;                     /* hidden by default — was missing, causing Safari purple tint */
  pointer-events: none;
  -webkit-transform: translate(0, 0);
  transform: translate(0, 0);
  will-change: transform, opacity, clip-path;
}
.site-logo::before { color: #0ff; }
.site-logo::after  { color: #f0f; }
.site-logo.glitching {
  -webkit-animation: none;
  animation: none;
}
.site-logo.glitching::before {
  opacity: .8;
  -webkit-animation: glitch-before 0.28s steps(3) forwards;
  animation: glitch-before 0.28s steps(3) forwards;
}
.site-logo.glitching::after {
  opacity: .7;
  -webkit-animation: glitch-after 0.28s steps(3) forwards;
  animation: glitch-after 0.28s steps(3) forwards;
}
@-webkit-keyframes glitch-before {
  0%   { -webkit-clip-path: inset(0 0 70% 0);  clip-path: inset(0 0 70% 0);  -webkit-transform: translate(-3px,  1px); transform: translate(-3px,  1px); }
  33%  { -webkit-clip-path: inset(40% 0 30% 0); clip-path: inset(40% 0 30% 0); -webkit-transform: translate( 3px, -1px); transform: translate( 3px, -1px); }
  66%  { -webkit-clip-path: inset(20% 0 55% 0); clip-path: inset(20% 0 55% 0); -webkit-transform: translate(-2px,  2px); transform: translate(-2px,  2px); }
  100% { -webkit-clip-path: inset(80% 0 0 0);   clip-path: inset(80% 0 0 0);   -webkit-transform: translate( 0, 0);      transform: translate( 0, 0);      opacity: 0; }
}
@keyframes glitch-before {
  0%   { clip-path: inset(0 0 70% 0);  transform: translate(-3px,  1px); }
  33%  { clip-path: inset(40% 0 30% 0); transform: translate( 3px, -1px); }
  66%  { clip-path: inset(20% 0 55% 0); transform: translate(-2px,  2px); }
  100% { clip-path: inset(80% 0 0 0);   transform: translate( 0,    0);   opacity: 0; }
}
@-webkit-keyframes glitch-after {
  0%   { -webkit-clip-path: inset(50% 0 20% 0); clip-path: inset(50% 0 20% 0); -webkit-transform: translate( 3px, -1px); transform: translate( 3px, -1px); }
  33%  { -webkit-clip-path: inset(10% 0 65% 0); clip-path: inset(10% 0 65% 0); -webkit-transform: translate(-3px,  2px); transform: translate(-3px,  2px); }
  66%  { -webkit-clip-path: inset(70% 0 5% 0);  clip-path: inset(70% 0 5% 0);  -webkit-transform: translate( 2px, -1px); transform: translate( 2px, -1px); }
  100% { -webkit-clip-path: inset(0 0 85% 0);   clip-path: inset(0 0 85% 0);   -webkit-transform: translate( 0, 0);      transform: translate( 0, 0);      opacity: 0; }
}
@keyframes glitch-after {
  0%   { clip-path: inset(50% 0 20% 0); transform: translate( 3px, -1px); }
  33%  { clip-path: inset(10% 0 65% 0); transform: translate(-3px,  2px); }
  66%  { clip-path: inset(70% 0 5% 0);  transform: translate( 2px, -1px); }
  100% { clip-path: inset(0 0 85% 0);   transform: translate( 0,    0);   opacity: 0; }
}
.site-logo .bracket { color: var(--border2); font-weight: 300; transition: color .2s; }
.site-logo:hover .bracket { color: var(--accent2); }

nav.site-nav {
  display: flex;
  align-items: center;
  gap: 1.75rem;
}
nav.site-nav a {
  font-family: var(--font-mono);
  font-size: .95rem;
  color: var(--text-dim);
  letter-spacing: .04em;
  text-transform: uppercase;
  transition: color .15s;
}
nav.site-nav a:hover,
nav.site-nav a.active { color: var(--accent); }

/* ── Hero / page banner ───────────────────── */
.page-hero {
  padding: 4rem 0 3rem;
  border-bottom: 1px solid var(--border);
  position: relative;
  text-align: center;
}
.page-hero::before {
  content: '';
  position: absolute;
  inset: -60px -100px -120px -100px;
  background:
    radial-gradient(ellipse 70% 120% at 50% 50%, rgba(176,106,255,.06) 0%, transparent 70%);
  pointer-events: none;
}

.page-hero h1 {
  font-family: var(--font-mono);
  font-size: clamp(1.6rem, 4vw, 2.5rem);
  font-weight: 600;
  color: #e8edf8;
  line-height: 1.25;
  margin-bottom: 1rem;
}

.hero-meta {
  font-family: var(--font-mono);
  font-size: .78rem;
  color: var(--text-dim);
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
}
.hero-meta span { display: flex; align-items: center; gap: .35rem; flex-wrap: wrap; max-width: 100%; box-sizing: border-box; }
.hero-meta .dot { color: var(--text-muted); }


.post-list {
  padding: 3rem 0;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.75rem;
}
.section-header-line { flex: 1; height: 1px; background: var(--border); }
.section-header-text {
  font-family: var(--font-mono);
  font-size: .7rem;
  color: var(--text-muted);
  letter-spacing: .18em;
  text-transform: uppercase;
  white-space: nowrap;
}

.post-item {
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: start;
  gap: 1rem 1.5rem;
  padding: 1.25rem 0;
  border-bottom: 1px solid var(--border);
  transition: background .15s;
  text-decoration: none;
  color: inherit;
  position: relative;
}
.post-item::before {
  content: '';
  position: absolute;
  left: -1.5rem;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--accent);
  transform: scaleY(0);
  transition: transform .2s;
  transform-origin: top;
}
.post-item:hover::before { transform: scaleY(1); }
.post-item:hover .post-title { color: var(--accent); }

.post-date {
  font-family: var(--font-mono);
  font-size: .85rem;
  color: var(--text-muted);
  white-space: nowrap;
  padding-top: .22rem;
  letter-spacing: .03em;
}

.post-info {}
.post-title {
  font-family: var(--font-mono);
  font-size: 1.15rem;
  font-weight: 500;
  color: #d8e0f0;
  margin-bottom: .35rem;
  transition: color .15s;
}
.post-summary {
  font-size: .88rem;
  color: var(--text-dim);
  line-height: 1.6;
}

.post-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .4rem;
  justify-content: flex-end;
  padding-top: .2rem;
  max-width: 100%;
  box-sizing: border-box;
}
.tag {
  font-family: var(--font-mono);
  font-size: .65rem;
  padding: .15rem .5rem;
  border: 1px solid var(--border2);
  color: var(--text-muted);
  border-radius: var(--radius);
  letter-spacing: .05em;
  white-space: nowrap;
  transition: border-color .15s, color .15s;
}
.tag:hover { border-color: var(--accent); color: var(--accent); }
.tag.cat-vuln    { border-color: rgba(255,68,102,.35); color: #ff7088; }
.tag.cat-re      { border-color: rgba(0,229,160,.35);  color: #00e5a0; }
.tag.cat-kernel  { border-color: rgba(176,106,255,.35);  color: var(--warn); }
.tag.cat-exploit { border-color: rgba(176,106,255,.35); color: #b06aff; }

/* ── Single post ─────────────────────────── */
.post-content {
  padding: 2.5rem 0 4rem;
}

.prose {
}

/* Center images contained within prose/markdown and keep sensible vertical spacing */
.prose img, .post-content img, figure img,
.wp-block-image img, .kg-image img, .kg-card-image img,
figure.align-left img, figure.align-right img, figure.align-center img,
.alignleft, .alignright, .aligncenter, img.align-left, img.align-right, img.align-center,
a img {
  display: block;
  margin: 1rem auto;
  max-width: 100%;
  float: none !important; /* override floats */
}
figure { margin: 1rem auto; text-align: center; }

.prose p         { margin-bottom: 1.25rem; }
.prose h2        { font-family: var(--font-mono); font-size: 1.2rem; font-weight: 600;
                   color: #dde6f8; margin: 2.5rem 0 .85rem;
                   padding-left: .85rem;
                   border-left: 2px solid var(--accent); }
.prose h3        { font-family: var(--font-mono); font-size: 1rem; font-weight: 500;
                   color: #c8d8f0; margin: 2rem 0 .65rem;
                   padding-bottom: .4rem;
                   border-bottom: 1px solid var(--border); }
.prose h4        { font-family: var(--font-mono); font-size: .9rem;
                   color: var(--text-dim); margin: 1.5rem 0 .5rem; }

.prose a         { color: var(--warn); border-bottom: 1px solid rgba(176,106,255,.25); transition: color .15s, border-color .15s, text-shadow .15s; }
.prose a:hover   { color: var(--accent); border-color: rgba(0,229,160,.5); text-shadow: 0 0 12px rgba(0,229,160,.4); }

/* Stronger rule for content-area links to override unexpected blue color sources */
.post-content a, article.prose a, .prose a { color: var(--warn) !important; border-bottom-color: rgba(176,106,255,.25) !important; }

.prose ul, .prose ol { margin: 0 0 1.25rem 1.5rem; }
.prose li        { margin-bottom: .35rem; color: var(--text); }

.prose blockquote {
  border-left: 2px solid var(--border2);
  margin: 1.75rem 0;
  padding: .75rem 1.25rem;
  background: var(--bg2);
  font-style: italic;
  color: var(--text-dim);
  font-size: .9rem;
}

/* ── Code blocks ─────────────────────────── */
.prose pre,
pre {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow-x: auto;
  padding: 1.25rem 1.5rem;
  margin: 1.5rem 0;
  position: relative;
}
.prose pre::before {
  content: attr(data-lang);
  position: absolute;
  top: .55rem;
  right: .85rem;
  font-family: var(--font-mono);
  font-size: .65rem;
  color: var(--text-muted);
  letter-spacing: .08em;
  text-transform: uppercase;
}
.prose pre code,
pre code {
  font-family: var(--font-mono);
  font-size: .82rem;
  line-height: 1.65;
  color: #b8d0f0;
  background: none;
  border: none;
  padding: 0;
}
.prose p code,
p code {
  font-family: var(--font-mono);
  font-size: .83em;
  color: var(--accent);
  background: rgba(0,229,160,.08);
  border: 1px solid rgba(0,229,160,.18);
  padding: .1em .38em;
  border-radius: var(--radius);
}

/* Syntax highlight colors */
.prose pre .k  { color: #7ec8ff; }   /* keyword   */
.prose pre .s  { color: #a8e0a0; }   /* string    */
.prose pre .c  { color: var(--text-muted); font-style: italic; } /* comment */
.prose pre .n  { color: #e0c882; }   /* name      */
.prose pre .m  { color: #f0a06a; }   /* number    */
.prose pre .o  { color: #c882e0; }   /* operator  */

/* ── Info / warning boxes ─────────────────── */
.callout {
  border-radius: var(--radius);
  padding: 1rem 1.25rem;
  margin: 1.5rem 0;
  font-size: .88rem;
  border-left: 3px solid;
  background: var(--bg2);
}
.callout-note    { border-color: var(--accent2); }
.callout-warn    { border-color: #e8a020; }
.callout-danger  { border-color: var(--accent3); }
.callout-label {
  font-family: var(--font-mono);
  font-size: .72rem;
  letter-spacing: .1em;
  text-transform: uppercase;
  font-weight: 600;
  margin-bottom: .35rem;
}
.callout-note  .callout-label { color: var(--accent2); }
.callout-warn  .callout-label { color: #e8a020; }
.callout-danger .callout-label { color: var(--accent3); }

/* ── Tags page ───────────────────────────── */
.tag-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: .75rem;
  padding: 2rem 0;
}
.tag-cloud .tag {
  font-size: .82rem;
  padding: .35rem .85rem;
}

/* ── Footer ──────────────────────────────── */
footer.site-footer {
  border-top: 1px solid var(--border);
  padding: 2rem 0;
  margin-top: 3rem;
}
footer.site-footer .container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
}
.footer-left {
  font-family: var(--font-mono);
  font-size: .75rem;
  color: var(--text-muted);
}
.footer-left strong { color: var(--accent); }
.footer-links {
  display: flex;
  gap: 1.25rem;
}
.footer-links a {
  font-family: var(--font-mono);
  font-size: .72rem;
  color: var(--text-muted);
  letter-spacing: .04em;
}
.footer-links a:hover { color: var(--accent); }

/* ── Syntax highlighting (Prism overrides) ───────── */
code[class*="language-"],
pre[class*="language-"] {
  font-family: var(--font-mono) !important;
  font-size: .82rem !important;
  line-height: 1.65 !important;
  background: none !important;
  text-shadow: none !important;
}
pre[class*="language-"] {
  background: var(--bg2) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius) !important;
  padding: 1.25rem 1.5rem !important;
  margin: 1.5rem 0 !important;
  overflow-x: auto;
  position: relative;
}
pre[data-lang]::after {
  content: attr(data-lang);
  position: absolute;
  top: .55rem;
  right: .85rem;
  font-family: var(--font-mono);
  font-size: .65rem;
  color: var(--text-muted);
  letter-spacing: .08em;
  text-transform: uppercase;
  pointer-events: none;
}
.token.comment, .token.prolog, .token.doctype, .token.cdata { color: #3d5070; font-style: italic; }
.token.punctuation  { color: #6a7fa0; }
.token.keyword, .token.operator, .token.selector { color: #7ec8ff; }
.token.string, .token.attr-value, .token.char    { color: #a3d9a0; }
.token.number, .token.boolean, .token.constant   { color: #b06aff; }
.token.function, .token.class-name               { color: #c9a0e8; }
.token.variable     { color: #9d7aff; }
.token.property, .token.tag, .token.builtin      { color: var(--warn); }
.token.regex, .token.important                   { color: var(--warn); }

/* ── Table ───────────────────────────────── */
.prose table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--font-mono);
  font-size: .8rem;
  margin: 1.5rem 0;
}
.prose th {
  text-align: left;
  padding: .5rem .75rem;
  background: var(--bg3);
  color: var(--text-dim);
  border: 1px solid var(--border);
  font-weight: 500;
  letter-spacing: .05em;
  text-transform: uppercase;
  font-size: .7rem;
}
.prose td {
  padding: .5rem .75rem;
  border: 1px solid var(--border);
  color: var(--text);
}
.prose tr:hover td { background: var(--bg2); }

/* ── Pagination ──────────────────────────── */
.pagination {
  display: flex;
  justify-content: space-between;
  padding: 2rem 0;
  font-family: var(--font-mono);
  font-size: .82rem;
}
.pagination a {
  color: var(--text-dim);
  border: 1px solid var(--border);
  padding: .4rem .9rem;
  border-radius: var(--radius);
  transition: border-color .15s, color .15s;
}
.pagination a:hover { border-color: var(--accent); color: var(--accent); }

/* Make the older/next pagination link the theme green by default for better visibility */
.pagination-next { color: var(--accent) !important; border-color: color-mix(in srgb, var(--accent) 30%, var(--border) 70%) !important; }
.pagination-next:hover { color: #00e5a0 !important; border-color: var(--accent) !important; }
.pagination-prev { color: var(--text-dim); }

/* ── Responsive ──────────────────────────── */
@media (max-width: 640px) {
  .post-item { grid-template-columns: 1fr; gap: .4rem; }
  .post-date { order: -1; }
  .post-tags { justify-content: flex-start; }
  nav.site-nav { gap: 1rem; }
  nav.site-nav a { font-size: .72rem; }
  /* Ensure tags don't overflow on narrow screens */
  .post-tags { width: 100%; overflow: visible; }
  .tag { white-space: normal; }
}
